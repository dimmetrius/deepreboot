(this["webpackJsonpfood-and-train"]=this["webpackJsonpfood-and-train"]||[]).push([[0],{182:function(t,e){t.exports=function(t,e,n){null==n&&(n="text/csv");var o=new Blob([t],{type:n}),s=document.createElement("a");s.download=e,s.href=window.URL.createObjectURL(o),s.dataset.downloadurl=[n,s.download,s.href].join(":");var i=document.createEvent("MouseEvents");return i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(i)}},183:function(t,e,n){var o={range:n(184)},s=n(0),i=n(20),a=n(34),r=n(61);t.exports=i({displayName:"exports",getDefaultProps:function(){return{columns:[],rows:[],sortBy:null,sortDir:"asc",onSort:function(){},onSolo:function(){},onColumnHide:function(){},soloText:"solo"}},getInitialState:function(){return{paginatePage:0}},render:function(){var t=this.props.rows,e=this.paginate(t),n=this.renderTableBody(this.props.columns,e.rows),o=this.renderTableHead(this.props.columns);return s.createElement("div",{className:"reactPivot-results"},s.createElement("table",{className:this.props.tableClassName},o,n),this.renderPagination(e))},renderTableHead:function(t){var e=this,n=this.props.sortBy,o=this.props.sortDir;return s.createElement("thead",null,s.createElement("tr",null,t.map((function(t){var i=t.className;t.title===n&&(i+=" "+o);var r="";return"dimension"!==t.type&&(r=s.createElement("span",{className:"reactPivot-hideColumn",onClick:a(e.props.onColumnHide,t.title)},"\xd7")),s.createElement("th",{className:i,onClick:a(e.props.onSort,t.title),style:{cursor:"pointer"},key:t.title},r,t.title)}))))},renderTableBody:function(t,e){var n=this;return s.createElement("tbody",null,e.map((function(e){return s.createElement("tr",{key:e._key,className:"reactPivot-level-"+e._level},t.map((function(t,o){return o<e._level?s.createElement("td",{key:o,className:"reactPivot-indent"}):n.renderCell(t,e)})))})))},renderCell:function(t,e){if("dimension"===t.type){var n=i=e[t.title],o="undefined"!==typeof i;t.template&&o&&(n=t.template(i,e))}else{var i;n=i=r(t,e);t.template&&(n=t.template(i,e))}if(o)var l=s.createElement("span",{className:"reactPivot-solo"},s.createElement("a",{style:{cursor:"pointer"},onClick:a(this.props.onSolo,{title:t.title,value:i})},this.props.soloText));return s.createElement("td",{className:t.className,key:[t.title,e.key].join("\xff"),title:t.title},s.createElement("span",null,n||0===n&&"0"||"")," ",l)},renderPagination:function(t){var e=this,n=t.nPages,i=t.curPage;return 1===n?"":s.createElement("div",{className:"reactPivot-paginate"},o.range(0,n).map((function(t){var n="reactPivot-pageNumber";return t===i&&(n+=" is-selected"),s.createElement("span",{className:n,key:t},s.createElement("a",{onClick:a(e.setPaginatePage,t)},t+1))})))},paginate:function(t){if(t.length<=0)return{rows:t,nPages:1,curPage:0};var e=this.state.paginatePage,n=this.props.nPaginateRows;n&&isFinite(n)||(n=t.length);var o=Math.ceil(t.length/n);e>=o&&(e=o-1);var s=e*n,i=t[s]._level,a=[];if(i>0)for(var r=s-1;r>=0&&(t[r]._level<i&&(a.unshift(t[r]),i=t[r]._level),9!==t[r]._level);r--);var l=s+n;return{rows:a.concat(t.slice(s,l)),nPages:o,curPage:e}},setPaginatePage:function(t){this.setState({paginatePage:t})}})},187:function(t,e,n){var o={compact:n(188)},s=n(0),i=n(20),a=n(34);t.exports=i({displayName:"exports",getDefaultProps:function(){return{dimensions:[],selectedDimensions:[],onChange:function(){},subDimensionText:"Sub Dimension..."}},render:function(){var t=this.props.subDimensionText,e=this.props.selectedDimensions,n=e.length;return s.createElement("div",{className:"reactPivot-dimensions"},e.map(this.renderDimension),s.createElement("select",{value:"",onChange:a(this.toggleDimension,n)},s.createElement("option",{value:""},t),this.props.dimensions.map((function(t){return s.createElement("option",{key:t.title},t.title)}))))},renderDimension:function(t,e){return s.createElement("select",{value:t,onChange:a(this.toggleDimension,e),key:t},s.createElement("option",null),this.props.dimensions.map((function(t){return s.createElement("option",{value:t.title,key:t.title},t.title)})))},toggleDimension:function(t,e){var n=e.target.value,s=this.props.selectedDimensions,i=s.indexOf(n);i>=0&&(s[i]=null),s[t]=n;var a=o.compact(s);this.props.onChange(a)}})},189:function(t,e,n){var o={without:n(190)},s=n(0),i=n(20);t.exports=i({displayName:"exports",getDefaultProps:function(){return{hiddenColumns:[],onChange:function(){}}},render:function(){return s.createElement("div",{className:"reactPivot-columnControl"},this.props.hiddenColumns.length?s.createElement("select",{value:"",onChange:this.showColumn},s.createElement("option",{value:""},"Hidden Columns"),this.props.hiddenColumns.map((function(t){return s.createElement("option",{key:t},t)}))):"")},showColumn:function(t){var e=t.target.value,n=o.without(this.props.hiddenColumns,e);this.props.onChange(n)}})},198:function(t,e,n){},199:function(t,e,n){"use strict";n.r(e);var o=n(0),s=n.n(o),i=n(62),a=n.n(i),r=(n(69),n(22)),l=n(21),c=(n(70),n(63)),u=n.n(c),m=n(60),p=function(t){var e=t.text,n=t.tooltip;return s.a.createElement("div",{className:"tooltip"},e,s.a.createElement("span",{className:"tooltiptext"},n))},h=["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"],d=function(t){var e=t.P,n=t.F,o=t.C,s=t.K,i=t.FBR,a=t.SGR;return["\u0411: ".concat(e),"\u0416: ".concat(n),"\u0423: ".concat(o),"\u043a\u043b\u0442\u0447.: ".concat(i),"\u0441\u0445\u0440.: ".concat(a),"\u041a\u043a\u0430\u043b ".concat(s)].join(";\n")},f=function(t){var e=t.split("."),n=Object(l.a)(e,3),o=n[0],s=n[1],i=n[2];return new Date(i,s-1,o)},v=function(t){var e=new Date(t.valueOf()),n=(t.getDay()+6)%7;e.setDate(e.getDate()-n+3);var o=e.valueOf();return e.setMonth(0,1),4!==e.getDay()&&e.setMonth(0,1+(4-e.getDay()+7)%7),1+Math.ceil((o-e)/6048e5)},g=[{value:function(t){return f(t.date)},sortBy:function(t){return f(t.date).getTime()},title:"\u0414\u0430\u0442\u0430",template:function(t,e){var n=e.date,o=new Date(t).getDay(),s=h[o];return"".concat(n,", ").concat(s)}},{value:"meal",title:"\u041f\u0440\u0438\u0435\u043c"},{value:"product",title:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442",template:function(t,e){return s.a.createElement(p,{text:"".concat(e["\u041f\u0440\u043e\u0434\u0443\u043a\u0442"]),tooltip:d(e)})}},{title:"\u041d\u0435\u0434\u0435\u043b\u044f",value:function(t){return function(t){var e=f(t);return v(e)}(t.date)},className:"alignRight"}],y=new m,w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.pow(10,e);return Math.round(t*n)/n},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";return parseFloat(t.replace(",","."))},E=function(t,e){var n=t.M,o=t.Pg,s=t.Fg,i=t.Cg,a=t.FBRg,l=t.SGRg,c=t.Kcal;return e.count=1,e.kcal=(e.kcal||0)+C(c),e.m=(e.m||0)+C(n),e.p=(e.p||0)+C(o),e.f=(e.f||0)+C(s),e.c=(e.c||0)+C(i),e.fbr=(e.fbr||0)+C(a),e.sgr=(e.sgr||0)+C(l),e.calcP=4*e.p,e.calcF=9*e.f,e.calcC=4*e.c,e.calcAll=e.calcP+e.calcF+e.calcC,e.percP=e.calcP/e.calcAll*100,e.percF=e.calcF/e.calcAll*100,e.percC=e.calcC/e.calcAll*100,Object(r.a)(Object(r.a)({},e),t)},D=[{title:"\u041c \u0433",value:function(t){return"".concat(w(t.m)," \u0433.")},className:"alignRight",sortBy:function(t){return t.m}},{title:"\u0411 \u0433, %",value:function(t){return t.p},className:"alignRight",template:function(t,e){return"".concat(w(e.p)," \u0433, ").concat(w(e.percP),"%")},sortBy:function(t){return t.p}},{title:"\u0416 \u0433, %",value:function(t){return t.f},className:"alignRight",template:function(t,e){return"".concat(w(e.f)," \u0433, ").concat(w(e.percF),"%")},sortBy:function(t){return t.f}},{title:"\u0423 \u0433, %",value:function(t){return t.c},template:function(t,e){return"".concat(w(e.c)," \u0433, ").concat(w(e.percC),"%")},className:"alignRight",sortBy:function(t){return t.c}},{title:"\u041a\u043b\u0442\u0447. \u0433",value:function(t){return t.fbr},template:function(t,e){return"".concat(w(e.fbr,1)," \u0433")},className:"alignRight",sortBy:function(t){return t.fbr}},{title:"\u0421\u0445\u0440. \u0433",value:function(t){return t.sgr},template:function(t,e){return"".concat(w(e.sgr,1)," \u0433")},className:"alignRight",sortBy:function(t){return t.sgr}},{title:"\u041a\u043a\u0430\u043b",value:function(t){return t.kcal},template:function(t,e){return"".concat(w(e.kcal))},className:"alignRight",sortBy:function(t){return t.kcal}}];var N=function(){var t=Object(o.useState)(""),e=Object(l.a)(t,2),n=e[0],i=e[1];Object(o.useEffect)((function(){fetch("https://deepreboot.firebaseio.com/food_csv.json").then((function(t){return t.json()})).then((function(t){i({dimmetrius:t})}))}),[]);var a=(window.location.search||"").replace("?","").split("&").reduce((function(t,e){var n=e.split("="),o=Object(l.a)(n,2),s=o[0],i=o[1];return t[s]=i,Object(r.a)({},t)}),{}),c=new Date,m=c.getFullYear(),p=v(c),h=parseFloat(a.w)||p,d=parseFloat(a.y)||m,w={rows:(n[a.u||"-"]||[]).filter((function(t){var e=f(t.date),n=function(t){return v(t)}(e),o=e.getFullYear();return n===h&&o===d})),eventBus:y,dimensions:g,calculations:D,reduce:E,activeDimensions:["\u0414\u0430\u0442\u0430","\u041f\u0440\u0438\u0435\u043c","\u041f\u0440\u043e\u0434\u0443\u043a\u0442"],nPaginateRows:300};return s.a.createElement("div",{className:"App"},s.a.createElement("h3",null,"\u0414\u043d\u0435\u0432\u043d\u0438\u043a \u043f\u0438\u0442\u0430\u043d\u0438\u044f \u043d\u0430 ".concat(h," \u043d\u0435\u0434\u0435\u043b\u0435 ").concat(d,"-\u0433\u043e \u0433\u043e\u0434\u0430")),s.a.createElement(u.a,w))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},34:function(t,e){var n=Array.prototype.slice;t.exports=function(t){var e=n.call(arguments,1);return function(){return t.apply(this,e.concat(n.call(arguments)))}}},61:function(t,e){t.exports=function(t,e){return null==t?null:"string"===typeof t.value?e[t.value]:t.value(e)}},63:function(t,e,n){var o={filter:n(71),map:n(148),find:n(55)},s=n(0),i=n(20),a=n(156),r=n(60),l=n(34),c=n(182),u=n(61),m=n(183),p=n(187),h=n(189);t.exports=i({displayName:"ReactPivot",getDefaultProps:function(){return{rows:[],dimensions:[],activeDimensions:[],reduce:function(){},tableClassName:"",csvDownloadFileName:"table.csv",csvTemplateFormat:!1,defaultStyles:!0,nPaginateRows:25,solo:{},hiddenColumns:[],hideRows:null,sortBy:null,sortDir:"asc",eventBus:new r,compact:!1,excludeSummaryFromExport:!1,onData:function(){},soloText:"solo",subDimensionText:"Sub Dimension..."}},getInitialState:function(){var t=this.props.dimensions;return{dimensions:o.filter(this.props.activeDimensions,(function(e){return o.find(t,(function(t){return t.title===e}))})),calculations:{},sortBy:this.props.sortBy,sortDir:this.props.sortDir,hiddenColumns:this.props.hiddenColumns,solo:this.props.solo,hideRows:this.props.hideRows,rows:[]}},componentWillMount:function(){this.props.defaultStyles&&n(198),this.dataFrame=a({rows:this.props.rows,dimensions:this.props.dimensions,reduce:this.props.reduce}),this.updateRows()},componentWillReceiveProps:function(t){t.hiddenColumns!==this.props.hiddenColumns&&this.setHiddenColumns(t.hiddenColumns),t.rows!==this.props.rows&&(this.dataFrame=a({rows:t.rows,dimensions:t.dimensions,reduce:t.reduce}),this.updateRows())},getColumns:function(){var t=this,e=[];return this.state.dimensions.forEach((function(n){var s=o.find(t.props.dimensions,(function(t){return t.title===n}));e.push({type:"dimension",title:s.title,value:s.value,className:s.className,template:s.template,sortBy:s.sortBy})})),this.props.calculations.forEach((function(n){t.state.hiddenColumns.indexOf(n.title)>=0||e.push({type:"calculation",title:n.title,template:n.template,value:n.value,className:n.className,sortBy:n.sortBy})})),e},render:function(){var t=this;return s.createElement("div",{className:"reactPivot"},this.props.hideDimensionFilter?"":s.createElement(p,{dimensions:this.props.dimensions,subDimensionText:this.props.subDimensionText,selectedDimensions:this.state.dimensions,onChange:this.setDimensions}),s.createElement(h,{hiddenColumns:this.state.hiddenColumns,onChange:this.setHiddenColumns}),null,Object.keys(this.state.solo).map((function(e){var n=t.state.solo[e];return s.createElement("div",{style:{clear:"both"},className:"reactPivot-soloDisplay",key:"solo-"+e},s.createElement("span",{className:"reactPivot-clearSolo",onClick:l(t.clearSolo,e)},"\xd7"),e,": ",n)})),s.createElement(m,{columns:this.getColumns(),rows:this.state.rows,sortBy:this.state.sortBy,sortDir:this.state.sortDir,onSort:this.setSort,onColumnHide:this.hideColumn,nPaginateRows:this.props.nPaginateRows,tableClassName:this.props.tableClassName,onSolo:this.setSolo,soloText:this.props.soloText}))},updateRows:function(){var t=this.getColumns(),e=this.state.sortBy,n=o.find(t,(function(t){return t.title===e}))||{},s=n.sortBy||("dimension"===n.type?n.title:n.value),i=this.state.sortDir,a=this.state.hideRows,r={dimensions:this.state.dimensions,sortBy:s,sortDir:i,compact:this.props.compact},l=this.state.solo;l&&(r.filter=function(t){var e=!0;return Object.keys(l).forEach((function(n){t[n]!==l[n]&&(e=!1)})),e});var c=this.dataFrame.calculate(r).filter((function(t){return!a||!a(t)}));this.setState({rows:c}),this.props.onData(c)},setDimensions:function(t){this.props.eventBus.emit("activeDimensions",t),this.setState({dimensions:t}),setTimeout(this.updateRows,0)},setHiddenColumns:function(t){this.props.eventBus.emit("hiddenColumns",t),this.setState({hiddenColumns:t}),setTimeout(this.updateRows,0)},setSort:function(t){var e=this.state.sortBy,n=this.state.sortDir;e===t?n="asc"===n?"desc":"asc":(e=t,n="asc"),this.props.eventBus.emit("sortBy",e),this.props.eventBus.emit("sortDir",n),this.setState({sortBy:e,sortDir:n}),setTimeout(this.updateRows,0)},setSolo:function(t){var e=this.state.solo;e[t.title]=t.value,this.props.eventBus.emit("solo",e),this.setState({solo:e}),setTimeout(this.updateRows,0)},clearSolo:function(t){var e=this.state.solo,n={};Object.keys(e).forEach((function(o){o!==t&&(n[o]=e[o])})),this.props.eventBus.emit("solo",n),this.setState({solo:n}),setTimeout(this.updateRows,0)},hideColumn:function(t){var e=this.state.hiddenColumns.concat([t]);this.setHiddenColumns(e),setTimeout(this.updateRows,0)},downloadCSV:function(t){var e=this,n=this.getColumns(),s=o.map(n,"title").map(JSON.stringify.bind(JSON)).join(",")+"\n",i=this.state.dimensions.length-1,a=this.props.excludeSummaryFromExport;t.forEach((function(t){if(!(a&&t._level<i)){var o=n.map((function(n){if("dimension"===n.type)var o=t[n.title];else o=u(n,t);return n.template&&e.props.csvTemplateFormat&&(o=n.template(o)),JSON.stringify(o)}));s+=o.join(",")+"\n"}})),c(s,this.props.csvDownloadFileName,"text/csv")}})},64:function(t,e,n){t.exports=n(199)},69:function(t,e,n){},70:function(t,e,n){}},[[64,1,2]]]);
//# sourceMappingURL=main.98718f7b.chunk.js.map